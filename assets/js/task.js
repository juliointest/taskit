function remove(a){var e=$(a).attr("rev"),t=$(a);confirm("Do you really want to remove this task?")&&$.post("http://server-url-here/task/remove",{taskid:e}).done(function(a){JSON.parse(a).removed?(Materialize.toast("Finally, I no longer need to set eyes on you damn task!",7e3,"rounded"),t.parent().remove()):Materialize.toast("Catastrophic error!",7e3,"rounded")})}function change(a){var e=$(a).attr("rev"),t=$(a).attr("done"),s=$(a);$.post("http://server-url-here/task/changestatus",{taskid:e,taskdone:t}).done(function(a){if(JSON.parse(a).changed){Materialize.toast("Yeah, the task status was changed!",7e3,"rounded");var e="check_box_outline_blank"==s.find("i").text()?"check_box":"check_box_outline_blank";s.find("i").text(e)}else Materialize.toast("Catastrophic error!",7e3,"rounded")})}$(document).ready(function(){$(".button-collapse").sideNav(),$(".modal").modal(),$(".datepicker").pickadate({selectMonths:!0,selectYears:15,today:"Today",clear:"Clear",close:"Ok",closeOnSelect:!1}),$(".timepicker").pickatime({default:"now",fromnow:0,twelvehour:!1,donetext:"OK",cleartext:"Clear",canceltext:"Cancel",autoclose:!1,ampmclickable:!0,aftershow:function(){}}),$("#addtask .modal-action").click(function(){var a=!1;if($("#addtask input, #addtask textarea").map(function(){""==$(this).val()?($(this).addClass("invalid").removeClass("valid"),a=!0):$(this).addClass("valid").removeClass("invalid")}),!a){var e=new Date($('#addtask input[name="date"]').val()),t=e.getFullYear(),s=e.getMonth()+1,i=t+"-"+(s=s<10?"0"+s:s)+"-"+e.getDate()+" "+$('#addtask input[name="time"]').val();$.post("http://server-url-here/task/save",{title:$('#addtask input[name="title"]').val(),text:$('#addtask textarea[name="text"]').val(),taskdone:$('#addtask select[name="done"]').val(),datetime:i}).done(function(a){var e=JSON.parse(a);if(e.saved){var t="yes"==e.data.taskdone?"check_box":"check_box_outline_blank";Materialize.toast("The task has been added, pretty simple!",7e3,"rounded"),$("#tasklist.collection").append('<li class="collection-item avatar">  <a class="button changeTaskStatus" onclick="change(this)" done="'+e.data.taskdone+'" rev="'+e.data.taskid+'"><i class="material-icons circle light-blue darken-2 white-text">'+t+'</i></a>  <span class="title">'+e.data.tasktitle+"</span><br />  <p>"+e.data.taskdatetime+"</p>  <small>"+e.data.taskdescription+'</small>  <a class="secondary-content button" onclick="remove(this)" rev="'+e.data.taskid+'"><i class="material-icons grey-text">delete</i></a></li>'),$('#addtask input[name="title"]').removeClass("valid").removeClass("invalid"),$('#addtask textarea[name="text"]').removeClass("valid").removeClass("invalid"),$('#addtask input[name="date"]').removeClass("valid").removeClass("invalid"),$('#addtask input[name="time"]').removeClass("valid").removeClass("invalid"),$('#addtask input[name="title"]').val(""),$('#addtask textarea[name="text"]').val(""),$('#addtask input[name="date"]').val(""),$('#addtask input[name="time"]').val(""),$("#addtask").modal("close")}else Materialize.toast("Catastrophic error!",7e3,"rounded"),$('#addtask input[name="title"]').removeClass("valid").removeClass("invalid"),$('#addtask textarea[name="text"]').removeClass("valid").removeClass("invalid")})}})});
